{"ast":null,"code":"var _jsxFileName = \"/home/ashwini/Desktop/Projects/image-client/src/game/game.js\";\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport { useHistory, Link } from \"react-router-dom\";\nimport { getSafe } from \"../utils\";\nimport axios from \"axios\";\nimport { CaptureClient } from \"../clients\";\nexport const GamePage = () => {\n  const history = useHistory();\n  const selectedImages = getSafe(() => history.location.state.selectedImages, []);\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\n  const [records, setRecords] = useState([]);\n  const currentImage = getSafe(() => selectedImages[currentImageIndex], {});\n  const updateImage = useCallback(() => {\n    const interval = setInterval(() => {\n      setCurrentImageIndex(currentImageIndex => (currentImageIndex + 1) % selectedImages.length);\n    }, 1000);\n    return () => clearInterval(interval);\n  }, [selectedImages.length]);\n  useEffect(updateImage, []);\n  useEffect(() => {\n    CaptureClient.getCaptures().then(({\n      data\n    }) => setRecords(data));\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }\n  }, \"Game\"), selectedImages.length ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 11\n    }\n  }, \"Image id \", currentImage.id), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"image-holder\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: `${axios.defaults.baseURL}/${currentImage.avatar_url}`,\n    alt: currentImage.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => {\n      CaptureClient.addCapture(currentImage.id).then(CaptureClient.getCaptures).then(({\n        data\n      }) => setRecords(data));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 11\n    }\n  }, \"Capture\"), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }\n  }, \"Capture Records\"), /*#__PURE__*/React.createElement(\"table\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 19\n    }\n  }, \"Image Id\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 19\n    }\n  }, \"Capture time\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 15\n    }\n  }, records.map(({\n    id,\n    image_id,\n    capture_time\n  }) => {\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      key: id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 23\n      }\n    }, image_id), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 23\n      }\n    }, capture_time));\n  }))))) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, \"Choose some images to play game. \", /*#__PURE__*/React.createElement(Link, {\n    to: \"/images\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 44\n    }\n  }, \"Start again\")));\n};","map":{"version":3,"sources":["/home/ashwini/Desktop/Projects/image-client/src/game/game.js"],"names":["React","useState","useEffect","useCallback","useHistory","Link","getSafe","axios","CaptureClient","GamePage","history","selectedImages","location","state","currentImageIndex","setCurrentImageIndex","records","setRecords","currentImage","updateImage","interval","setInterval","length","clearInterval","getCaptures","then","data","id","defaults","baseURL","avatar_url","addCapture","map","image_id","capture_time"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\nimport { useHistory, Link } from \"react-router-dom\";\nimport { getSafe } from \"../utils\";\nimport axios from \"axios\";\nimport { CaptureClient } from \"../clients\";\n\nexport const GamePage = () => {\n  const history = useHistory();\n  const selectedImages = getSafe(\n    () => history.location.state.selectedImages,\n    []\n  );\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\n  const [records, setRecords] = useState([]);\n\n  const currentImage = getSafe(() => selectedImages[currentImageIndex], {});\n\n  const updateImage = useCallback(() => {\n    const interval = setInterval(() => {\n      setCurrentImageIndex(\n        (currentImageIndex) => (currentImageIndex + 1) % selectedImages.length\n      );\n    }, 1000);\n    return () => clearInterval(interval);\n  }, [selectedImages.length]);\n\n  useEffect(updateImage, []);\n\n  useEffect(() => {\n    CaptureClient.getCaptures().then(({ data }) => setRecords(data));\n  }, []);\n\n  return (\n    <div>\n      <h3>Game</h3>\n      {selectedImages.length ? (\n        <div>\n          <i>Image id {currentImage.id}</i>\n          <div className=\"image-holder\">\n            <img\n              src={`${axios.defaults.baseURL}/${currentImage.avatar_url}`}\n              alt={currentImage.id}\n            />\n          </div>\n          <button\n            onClick={() => {\n              CaptureClient.addCapture(currentImage.id)\n                .then(CaptureClient.getCaptures)\n                .then(({ data }) => setRecords(data));\n            }}\n          >\n            Capture\n          </button>\n          <hr />\n          <div>\n            <h3>Capture Records</h3>\n            <table>\n              <thead>\n                <tr>\n                  <td>Image Id</td>\n                  <td>Capture time</td>\n                </tr>\n              </thead>\n              <tbody>\n                {records.map(({ id, image_id, capture_time }) => {\n                  return (\n                    <tr key={id}>\n                      <td>{image_id}</td>\n                      <td>{capture_time}</td>\n                    </tr>\n                  );\n                })}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      ) : (\n        <div>\n          Choose some images to play game. <Link to=\"/images\">Start again</Link>\n        </div>\n      )}\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}